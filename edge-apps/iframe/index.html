<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <title>iFrame Edge App</title>
  <script src="screenly.js?version=1" defer></script>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="style.css">
</head>

<body>

  <iframe id="iframe" src="" frameborder="0" marginheight="0" marginwidth="0" width="100%" height="100%"
    scrolling="auto"></iframe>

  <script>
    function extractUrlFromIframeSetting(settingValue) {
      // Check if the settingValue is an iframe snippet
      if (settingValue.includes('<iframe')) {
        // Parse the src attribute from the iframe snippet
        const match = settingValue.match(/<iframe.*?src=["'](.*?)["']/);
        if (match && match[1]) {
          return match[1];
        }
      } else {
        // Setting value is a direct URL
        return settingValue;
      }
      // If no URL is found, return null or handle as needed
      return null;
    }

    document.addEventListener("DOMContentLoaded", function () {
      var iframeSettingValue = screenly.settings.iframe || "iframe URL not set";
      var iframeUrl = extractUrlFromIframeSetting(iframeSettingValue);
      var iframeElement = document.getElementById("iframe");
      iframeElement.src = iframeUrl;
      iframeElement.innerText = iframeUrl;
    });
  </script>
</body>

</html>