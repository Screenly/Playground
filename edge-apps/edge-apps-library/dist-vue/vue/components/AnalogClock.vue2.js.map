{"version":3,"file":"AnalogClock.vue2.js","sources":["../../../src/vue/components/AnalogClock.vue"],"sourcesContent":["<script setup lang=\"ts\">\nimport { ref, onMounted, onUnmounted } from 'vue'\n\ninterface Props {\n  timezone?: string\n  locale?: string\n}\n\nconst props = withDefaults(defineProps<Props>(), {\n  timezone: 'UTC',\n  locale: 'en',\n})\n\nconst currentTime = ref(new Date())\n\nlet animationFrameId: number | null = null\nlet lastUpdateTime = 0\n\nconst updateClock = (timestamp: number) => {\n  // Only update every 1000ms (1 second) for better performance\n  if (timestamp - lastUpdateTime >= 1000) {\n    currentTime.value = new Date()\n    lastUpdateTime = timestamp\n  }\n\n  // Continue the animation loop\n  animationFrameId = requestAnimationFrame(updateClock)\n}\n\nconst getTimeInTimezone = (date: Date, timezone: string) => {\n  try {\n    // Use Intl.DateTimeFormat to get time in the specified timezone\n    const formatter = new Intl.DateTimeFormat('en-US', {\n      timeZone: timezone,\n      year: 'numeric',\n      month: '2-digit',\n      day: '2-digit',\n      hour: '2-digit',\n      minute: '2-digit',\n      second: '2-digit',\n      hour12: false,\n    })\n\n    const parts = formatter.formatToParts(date)\n    const timeParts: Record<string, string> = {}\n\n    parts.forEach((part) => {\n      if (part.type !== 'literal') {\n        timeParts[part.type] = part.value\n      }\n    })\n\n    return {\n      hours: parseInt(timeParts.hour || '0'),\n      minutes: parseInt(timeParts.minute || '0'),\n      seconds: parseInt(timeParts.second || '0'),\n    }\n  } catch (error) {\n    console.warn(`Invalid timezone: ${timezone}, using UTC`, error)\n    // Fallback to UTC\n    return {\n      hours: date.getUTCHours(),\n      minutes: date.getUTCMinutes(),\n      seconds: date.getUTCSeconds(),\n    }\n  }\n}\n\nconst getHandRotation = (type: 'hour' | 'minute' | 'second') => {\n  const timeInTz = getTimeInTimezone(currentTime.value, props.timezone)\n\n  switch (type) {\n    case 'hour':\n      return timeInTz.hours * 30 + timeInTz.minutes / 2\n    case 'minute':\n      return timeInTz.minutes * 6\n    case 'second':\n      return timeInTz.seconds * 6\n    default:\n      return 0\n  }\n}\n\nonMounted(() => {\n  currentTime.value = new Date()\n  lastUpdateTime = performance.now()\n  animationFrameId = requestAnimationFrame(updateClock)\n})\n\nonUnmounted(() => {\n  if (animationFrameId) {\n    cancelAnimationFrame(animationFrameId)\n  }\n})\n</script>\n\n<template>\n  <div class=\"clock-container\">\n    <div class=\"clock\">\n      <div class=\"seconds-bar\">\n        <span v-for=\"i in 60\" :key=\"i\" :style=\"{ '--index': i }\">\n          <p></p>\n        </span>\n      </div>\n      <div class=\"number-hours\"></div>\n      <div class=\"hands-box\">\n        <div\n          class=\"hand hour\"\n          :style=\"{ transform: `rotate(${getHandRotation('hour')}deg)` }\"\n        >\n          <i></i>\n        </div>\n        <div\n          class=\"hand minute\"\n          :style=\"{ transform: `rotate(${getHandRotation('minute')}deg)` }\"\n        >\n          <i></i>\n        </div>\n        <div\n          class=\"hand second\"\n          :style=\"{ transform: `rotate(${getHandRotation('second')}deg)` }\"\n        >\n          <i></i>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<style scoped lang=\"scss\">\n.clock-container {\n  width: 36.43rem;\n  height: 36.43rem;\n  background: #fff;\n  border-radius: 50%;\n  display: flex;\n  justify-self: center;\n  align-items: center;\n  aspect-ratio: 1 / 1;\n}\n\n.clock-container .clock {\n  width: 30rem;\n  height: 30rem;\n  border-radius: 50%;\n  margin: auto;\n  position: relative;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n\n.clock .number-hours,\n.clock .seconds-bar {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  border-radius: 50%;\n}\n\n.seconds-bar span {\n  position: absolute;\n  transform: rotate(calc(var(--index) * 45deg));\n  inset: -1.43rem;\n  text-align: center;\n}\n\n.clock .seconds-bar span p {\n  background: var(--theme-color-primary);\n  width: 0.36rem;\n  height: 1.29rem;\n  display: inline-block;\n  border-radius: 0.14rem;\n  transform: translateY(0.07rem);\n}\n\n.hands-box {\n  position: relative;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n\n.hands-box .hand {\n  position: absolute;\n  display: flex;\n  justify-content: center;\n  transition: transform 0.1s ease-in-out;\n  /* Enable hardware acceleration for smoother animations */\n  will-change: transform;\n  transform: translateZ(0);\n}\n\n.hands-box .second {\n  transition: none;\n  /* Disable transition for second hand to prevent stuttering */\n  will-change: transform;\n  transform: translateZ(0);\n}\n\n.hands-box .hour {\n  width: 20rem;\n  height: 20rem;\n}\n\n.hands-box .hour i {\n  width: 0.5rem;\n  height: 9.86rem;\n  background: #fff;\n  position: absolute;\n  box-shadow: 0 0 2.14rem 0 rgb(0 0 0 / 97%);\n}\n\n.hands-box .hour i::before {\n  content: '';\n  position: absolute;\n  height: 7.5rem;\n  width: 1.07rem;\n  bottom: 2.14rem;\n  left: 50%;\n  transform: translateX(-50%);\n  border-radius: 1.43rem;\n  background: var(--theme-color-primary);\n  z-index: 2;\n  box-shadow: 0 0 1.71rem 0 rgb(0 0 0 / 26%);\n}\n\n.hands-box .hour i::after {\n  content: '';\n  position: absolute;\n  height: 8.21rem;\n  width: 1.86rem;\n  bottom: 1.79rem;\n  left: 50%;\n  transform: translateX(-50%);\n  border-radius: 1.79rem;\n  background: #fff;\n  z-index: 1;\n}\n\n.hands-box .minute {\n  width: 27.14rem;\n  height: 27.14rem;\n}\n\n.hands-box .minute::before {\n  content: '';\n  position: absolute;\n  top: 50%;\n  transform: translateY(-50%);\n  width: 1.79rem;\n  height: 1.79rem;\n  background: #fff;\n  border-radius: 1.79rem;\n  z-index: 999;\n}\n\n.hands-box .minute i {\n  width: 0.5rem;\n  height: 13.57rem;\n  background: #fff;\n  position: absolute;\n  box-shadow: 0 0 2.14rem 0 rgb(0 0 0 / 97%);\n}\n\n.hands-box .minute i::before {\n  content: '';\n  width: 1.86rem;\n  height: 14.71rem;\n  background: #fff;\n  position: absolute;\n  bottom: 1.79rem;\n  left: 50%;\n  transform: translateX(-50%);\n  border-radius: 1.79rem;\n  z-index: 1;\n  box-shadow: 0 0 1.71rem 0 rgb(0 0 0 / 26%);\n}\n\n.hands-box .minute i::after {\n  content: '';\n  width: 1.07rem;\n  height: 13.93rem;\n  background: var(--theme-color-primary);\n  position: absolute;\n  bottom: 2.21rem;\n  left: 50%;\n  transform: translateX(-50%);\n  border-radius: 1.43rem;\n  z-index: 2;\n}\n\n.hands-box .second {\n  width: 30rem;\n  height: 34.29rem;\n}\n\n.hands-box .second::before {\n  content: '';\n  position: absolute;\n  top: 50%;\n  transform: translateY(-50%);\n  width: 1.14rem;\n  height: 1.14rem;\n  background: #f7410a;\n  border-radius: 1.79rem;\n}\n\n.hands-box .second::after {\n  content: '';\n  position: absolute;\n  top: 50%;\n  transform: translateY(-50%);\n  width: 0.57rem;\n  height: 0.57rem;\n  background: var(--theme-color-primary);\n  border-radius: 1.79rem;\n}\n\n.hands-box .second i {\n  width: 0.29rem;\n  height: calc(15rem + 3.57rem);\n  background: #f7410a;\n  position: relative;\n  border-radius: 0.14rem;\n}\n\n.hands-box .second i::before {\n  content: '';\n  width: 0.29rem;\n  height: 3.21rem;\n  background: #f7410a;\n  position: absolute;\n  bottom: -2.93rem;\n  left: 50%;\n  transform: translateX(-50%);\n  border-radius: 0.36rem;\n}\n\n/* Media Queries */\n@media screen and (min-width: 480px) and (orientation: portrait) {\n  .clock-container {\n    transform: scale(0.5);\n  }\n}\n\n@media screen and (min-width: 720px) and (orientation: portrait) {\n  .clock-container {\n    transform: scale(1);\n  }\n}\n\n@media screen and (min-width: 800px) and (orientation: landscape) {\n  .clock-container {\n    transform: scale(0.5);\n  }\n}\n\n@media screen and (min-width: 1080px) and (orientation: portrait) {\n  .clock-container {\n    transform: scale(1.25);\n  }\n}\n\n@media screen and (min-width: 1280px) and (orientation: landscape) {\n  .clock-container {\n    transform: scale(0.9);\n  }\n}\n\n@media screen and (min-width: 1920px) and (orientation: landscape) {\n  .clock-container {\n    transform: scale(1.25);\n  }\n}\n\n@media screen and (min-width: 2160px) and (orientation: portrait) {\n  .clock-container {\n    transform: scale(2.7);\n  }\n}\n\n@media screen and (min-width: 3840px) and (orientation: landscape) {\n  .clock-container {\n    transform: scale(2.7);\n  }\n}\n\n@media screen and (min-width: 4096px) and (orientation: landscape) {\n  .clock-container {\n    transform: scale(2.8);\n  }\n}\n</style>\n"],"names":["props","__props","currentTime","ref","animationFrameId","lastUpdateTime","updateClock","timestamp","getTimeInTimezone","date","timezone","parts","timeParts","part","error","getHandRotation","type","timeInTz","onMounted","onUnmounted","_openBlock","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_hoisted_3","_Fragment","_renderList","i","_hoisted_4"],"mappings":"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"}