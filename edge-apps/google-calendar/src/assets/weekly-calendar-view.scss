@mixin event-base-styles(
  $left-right-margin,
  $border-radius,
  $border-width,
  $padding,
  $font-size
) {
  position: absolute;
  left: $left-right-margin;
  right: $left-right-margin;
  background-color: #e6e7e7;
  border-radius: $border-radius !important;
  border-left-color: var(--theme-color-primary) !important;
  border-width: 0 0 0 $border-width !important;
  padding: $padding !important;
  font-size: $font-size;
  overflow: hidden;
  color: var(--theme-color-text);
}

@mixin time-indicator-base($height, $left-position) {
  position: absolute;
  left: $left-position;
  right: 0;
  height: $height;
  background-color: #ea4335;
  z-index: 10;
  pointer-events: none;
}

@mixin time-indicator-dot($left-offset, $top-offset, $size) {
  &::before {
    content: '';
    position: absolute;
    left: $left-offset;
    top: $top-offset;
    width: $size;
    height: $size;
    background-color: #ea4335;
    border-radius: 50%;
  }
}

@mixin flex-center {
  display: flex;
  align-items: center;
  justify-content: center;
}

@mixin text-ellipsis {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.weekly-view {
  .weekly-calendar {
    height: 100%;
    width: 100%;
    display: flex;
    flex-direction: column;
    padding: 1.5rem;
  }

  .week-header {
    display: flex;
    padding: 0.5rem 0 1rem;
    border-bottom: 1px solid var(--theme-color-secondary);
  }

  .time-label-spacer {
    width: 7rem;
    flex-shrink: 0;
  }

  .day-header {
    flex: 1;
    text-align: center;
    font-weight: bold;
    color: var(--theme-color-text);
    font-size: 1.5rem;
    @include flex-center;
    gap: 0.5rem;
  }

  .week-body {
    flex: 1;
    display: flex;
    flex-direction: column;
    position: relative;
  }

  .current-time-indicator {
    @include time-indicator-base(2px, 8.25rem);
    @include time-indicator-dot(-6px, -3px, 8px);
  }

  .week-row {
    display: flex;
    flex: 1;
    position: relative;
  }

  .time-label {
    width: 7rem;
    padding: 0.5rem;
    margin-right: 1rem;
    text-align: right;
    color: var(--theme-color-text);
    flex-shrink: 0;
    @include text-ellipsis;
    font-size: 1.125rem;
    transform: translateY(25%);
  }

  .day-column {
    flex: 1;
    position: relative;
    border-left: 1px solid var(--theme-color-secondary);
  }

  .hour-line {
    position: absolute;
    top: 50%;
    left: 0;
    right: 0;
    height: 1px;
    background-color: var(--theme-color-secondary);
    opacity: 0.5;
  }

  .calendar-event-item {
    @include event-base-styles(0.2rem, 0.3rem, 0.4rem, 0.4rem, 0.8rem);
  }

  .event-title {
    font-weight: bold;
    margin-bottom: 0.25rem;
    @include text-ellipsis;
  }

  .event-time {
    font-size: 0.7rem;
    opacity: 0.9;
  }

  .month-year-header {
    text-align: left;
    font-size: 1.75rem;
    font-weight: bold;
    color: var(--theme-color-text);
    padding: 0.5rem 0 1rem 1.5rem;
  }
}

.current-date {
  @include flex-center;
  min-width: 3.5rem;
  height: 3.5rem;
  padding: 0 0.375rem;
  border-radius: 50%;
  background-color: var(--theme-color-primary);
  color: var(--theme-color-tertiary);
}

@media screen and (width <= 800px) {
  .weekly-view {
    .weekly-calendar {
      padding: 0.63rem;
    }

    .time-label-spacer {
      width: 2.94rem;
    }

    .day-header {
      font-size: 0.63rem;
      gap: 0.21rem;
    }

    .time-label {
      width: 2.94rem;
      padding: 0.21rem;
      margin-right: 0.42rem;
      font-size: 0.47rem;
    }

    .calendar-event-item {
      @include event-base-styles(
        0.084rem,
        0.105rem,
        0.14rem,
        0.105rem,
        0.336rem
      );
    }

    .event-time {
      font-size: 0.294rem;
    }

    .month-year-header {
      font-size: 0.735rem;
      padding: 0.21rem 0 0.42rem 0.63rem;
    }

    .event-title {
      margin-bottom: 0.105rem;
    }

    .current-time-indicator {
      @include time-indicator-base(0.84px, 3.47rem);
      @include time-indicator-dot(-2.52px, -1.26px, 3.36px);
    }
  }

  .current-date {
    min-width: 1.47rem;
    height: 1.47rem;
    padding: 0 0.157rem;
  }
}

@media screen and (width <= 1280px) {
  .weekly-view {
    .weekly-calendar {
      padding: 1rem;
    }

    .time-label-spacer {
      width: 4.7rem;
    }

    .day-header {
      font-size: 1rem;
      gap: 0.335rem;
    }

    .time-label {
      width: 4.7rem;
      padding: 0.335rem;
      margin-right: 0.67rem;
      font-size: 0.75rem;
    }

    .calendar-event-item {
      @include event-base-styles(0.135rem, 0.17rem, 0.23rem, 0.17rem, 0.535rem);
    }

    .event-time {
      font-size: 0.47rem;
    }

    .month-year-header {
      font-size: 1.17rem;
      padding: 0.335rem 0 0.67rem 1rem;
    }

    .event-title {
      margin-bottom: 0.17rem;
    }

    .current-time-indicator {
      @include time-indicator-base(1.34px, 5.53rem);
      @include time-indicator-dot(-4.02px, -2.01px, 5.36px);
    }
  }

  .current-date {
    min-width: 2.345rem;
    height: 2.345rem;
    padding: 0 0.25rem;
  }
}

@media screen and (width >= 3840px) {
  .weekly-view {
    .weekly-calendar {
      padding: 3rem;
    }

    .time-label-spacer {
      width: 14rem;
    }

    .day-header {
      font-size: 3rem;
      gap: 1rem;
    }

    .time-label {
      width: 14rem;
      padding: 1rem;
      margin-right: 2rem;
      font-size: 2.25rem;
    }

    .calendar-event-item {
      @include event-base-styles(0.4rem, 0.5rem, 0.67rem, 0.5rem, 1.6rem);
    }

    .event-time {
      font-size: 1.4rem;
    }

    .month-year-header {
      font-size: 3.5rem;
      padding: 1rem 0 2rem 3rem;
    }

    .event-title {
      margin-bottom: 0.5rem;
    }

    .current-time-indicator {
      @include time-indicator-base(4px, 16.5rem);
      @include time-indicator-dot(-12px, -6px, 16px);
    }
  }

  .current-date {
    min-width: 7rem;
    height: 7rem;
    padding: 0 0.75rem;
  }
}
