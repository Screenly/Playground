@mixin event-base-styles(
  $left-right-margin,
  $border-radius,
  $border-width,
  $padding,
  $font-size
) {
  position: absolute;
  left: $left-right-margin;
  right: $left-right-margin;
  background-color: #e6e7e7;
  border-radius: $border-radius !important;
  border-left-color: var(--theme-color-primary) !important;
  border-width: 0 0 0 $border-width !important;
  padding: $padding !important;
  font-size: $font-size;
  overflow: hidden;
  color: var(--theme-color-text);
  z-index: 2;
}

@mixin time-indicator-base($height, $left-position) {
  position: absolute;
  left: $left-position;
  right: 0;
  height: $height;
  background-color: #ea4335;
  z-index: 10;
  pointer-events: none;
}

@mixin time-indicator-dot($left-offset, $top-offset, $size) {
  &::before {
    content: '';
    position: absolute;
    left: $left-offset;
    top: $top-offset;
    width: $size;
    height: $size;
    background-color: #ea4335;
    border-radius: 50%;
  }
}

@mixin flex-center {
  display: flex;
  align-items: center;
  justify-content: center;
}

@mixin text-ellipsis {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.weekly-view {
  .weekly-calendar {
    height: 100%;
    width: 100%;
    display: flex;
    flex-direction: column;
    padding: 1.5rem;
  }

  .week-header {
    display: flex;
    padding: 0.5rem 0 1rem;
    border-bottom: 1px solid var(--theme-color-secondary);
  }

  .time-label-spacer {
    width: 7rem;
    flex-shrink: 0;
  }

  .day-header {
    flex: 1;
    text-align: center;
    font-weight: bold;
    color: var(--theme-color-text);
    font-size: 1.5rem;
    @include flex-center;
    gap: 0.5rem;
  }

  .week-body {
    flex: 1;
    display: flex;
    flex-direction: column;
    position: relative;
  }

  .current-time-indicator {
    @include time-indicator-base(2px, 8.25rem);
    @include time-indicator-dot(-6px, -3px, 8px);
  }

  .week-row {
    display: flex;
    flex: 1;
    position: relative;
  }

  .time-label {
    width: 7rem;
    padding: 0.5rem;
    margin-right: 1rem;
    text-align: right;
    color: var(--theme-color-text);
    flex-shrink: 0;
    @include text-ellipsis;
    font-size: 1.125rem;
    transform: translateY(25%);
  }

  .day-column {
    flex: 1;
    position: relative;
    border-left: 1px solid var(--theme-color-secondary);
  }

  .hour-line {
    position: absolute;
    top: 50%;
    left: 0;
    right: 0;
    height: 1px;
    background-color: var(--theme-color-secondary);
    opacity: 0.5;
    z-index: 1;
  }

  .calendar-event-item {
    @include event-base-styles(0.2rem, 0.3rem, 0.4rem, 0.4rem, 0.8rem);
  }

  .event-title {
    font-weight: bold;
    margin-bottom: 0.25rem;
    @include text-ellipsis;
  }

  .event-time {
    font-size: 0.7rem;
    opacity: 0.9;
  }

  .month-year-header {
    text-align: left;
    font-size: 1.75rem;
    font-weight: bold;
    color: var(--theme-color-text);
    padding: 0.5rem 0 1rem 1.5rem;
  }
}

.current-date {
  @include flex-center;
  min-width: 3.5rem;
  height: 3.5rem;
  padding: 0 0.375rem;
  border-radius: 50%;
  background-color: var(--theme-color-primary);
  color: var(--theme-color-tertiary);
}

@mixin weekly-calendar-view($orientation: 'landscape', $multiplier: 1) {
  .weekly-view {
    .weekly-calendar {
      padding: 0.63rem * $multiplier;
    }

    .time-label-spacer {
      width: 2.94rem * $multiplier;
    }

    .day-header {
      font-size: 0.63rem * $multiplier;
      gap: 0.21rem * $multiplier;
    }

    .time-label {
      width: 2.94rem * $multiplier;
      padding: 0.21rem * $multiplier;
      margin-right: 0.42rem * $multiplier;
      font-size: 0.47rem * $multiplier;
    }

    .calendar-event-item {
      @include event-base-styles(
        0.084rem * $multiplier,
        0.105rem * $multiplier,
        0.14rem * $multiplier,
        0.105rem * $multiplier,
        0.336rem * $multiplier
      );
    }

    .event-time {
      font-size: 0.294rem * $multiplier;
    }

    .month-year-header {
      font-size: 0.735rem * $multiplier;
      padding: 0.21rem * $multiplier 0 0.42rem * $multiplier 0.63rem *
        $multiplier;
    }

    .event-title {
      margin-bottom: 0.105rem * $multiplier;
    }

    .current-time-indicator {
      @include time-indicator-base(0.84px * $multiplier, 3.47rem * $multiplier);
      @include time-indicator-dot(
        -2.52px * $multiplier,
        -1.26px * $multiplier,
        3.36px * $multiplier
      );
    }
  }

  .current-date {
    min-width: 1.47rem * $multiplier;
    height: 1.47rem * $multiplier;
    padding: 0 0.157rem * $multiplier;
  }
}

@media screen and (min-width: 800px) and (orientation: landscape) {
  @include weekly-calendar-view('landscape', 1);
}

@media screen and (min-width: 1280px) and (orientation: landscape) {
  @include weekly-calendar-view('landscape', 1.5);
}

@media screen and (min-width: 1920px) and (orientation: landscape) {
  @include weekly-calendar-view('landscape', 2.25);
}

@media screen and (min-width: 3840px) and (orientation: landscape) {
  @include weekly-calendar-view('landscape', 4.5);
}

@media screen and (min-width: 480px) and (orientation: portrait) {
  @include weekly-calendar-view('portrait', 1);
}

@media screen and (min-width: 720px) and (orientation: portrait) {
  @include weekly-calendar-view('portrait', 1.6);
}

@media screen and (min-width: 1080px) and (orientation: portrait) {
  @include weekly-calendar-view('portrait', 2.4);
}

@media screen and (min-width: 2160px) and (orientation: portrait) {
  @include weekly-calendar-view('portrait', 4.8);
}
