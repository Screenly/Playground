<!DOCTYPE html>
<html>
    <head>
        <title>Screenly Weather App - Weather Forecast</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" href="static/styles/main.css" />
        <link rel="stylesheet" href="static/styles/background.css" />

        <script src="screenly.js?version=1"></script>

        <!-- Google Tag Manager -->
        <script>
            const {
                enable_analytics: enableAnalytics,
                tag_manager_id: tagManagerId,
            } = screenly.settings;

            if (enableAnalytics === 'true') {
                (function(w, d, s, l, i) {
                    w[l] = w[l] || [];
                    w[l].push({
                        'gtm.start': new Date().getTime(),
                        event: 'gtm.js'
                    });
                    var f = d.getElementsByTagName(s)[0],
                        j = d.createElement(s),
                        dl = l != 'dataLayer' ? '&l=' + l : '';
                    j.async = true;
                    j.src = 'https://www.googletagmanager.com/gtm.js?id=' + i + dl;
                    f.parentNode.insertBefore(j, f);
                })(window, document, 'script', 'dataLayer', tagManagerId);
            }
        </script>
        <!-- End Google Tag Manager -->
    </head>
    <body>
        <div class="content">
            <section class="header">
                <div class="location">
                    <span class="location-item">
                        <img src="static/images/icons/map-pin.svg" alt="map pin icon">
                        <span id="city"></span>
                    </span>

                    <span class="location-item">
                        <img src="static/images/icons/clock.svg" alt="clock icon">
                        <span id="time"></span>
                    </span>

                    <span class="location-item">
                        <img src="static/images/icons/calendar.svg" alt="calendar icon">
                        <span id="date"></span>
                    </span>
                </div>
            </section>
            <section class="footer">
                <div class="current-weather">
                  <div class="weather-condition">
                    <img id="current-weather-icon" alt="weather icon">
                    <span id="current-weather-status"></span>
                  </div>
                  <div class="temperature">
                    <span id="current-temp"></span>
                    <span id="current-temp-scale"></span>
                  </div>
                </div>
                <div id="weather-item-list">
                </div>
                <div class="weather-item dummy-node">
                  <span class="item-temp-degree">
                    <span class="item-temp"></span>&deg;
                  </span>
                  <img class="item-icon" alt="clock icon">
                  <span class="item-time"></span>
                </div>
            </section>
        </div>

        <script>
            const disableAnalytics = screenly.settings.disable_analytics == "true";

            if (disableAnalytics != "true") {
                const sentryId = screenly.settings.sentry_id;
                const gaApiKey = screenly.settings.ga_api_key;

                const sentryScript = document.createElement('script');
                sentryScript.src = `https://js.sentry-cdn.com/${sentryId}.min.js`;
                sentryScript.crossOrigin = 'anonymous';
                document.head.appendChild(sentryScript);

                const gtagScript = document.createElement('script');
                gtagScript.src = `https://www.googletagmanager.com/gtag/js?id=${gaApiKey}`;
                gtagScript.async = true;
                document.head.appendChild(gtagScript);

                window.dataLayer = window.dataLayer || [];
                function gtag(){dataLayer.push(arguments);}

                gtag('js', new Date());
                gtag('config', gaApiKey);
            }
        </script>

        <script src="static/js/tz.min.js"></script>
        <script src="static/js/moment-with-locales.min.js"></script>
        <script src="static/js/moment-timezone-with-data.min.js"></script>
        <script src="static/js/icons.js"></script>
        <script src="static/js/main.js"></script>
    </body>
</html>
